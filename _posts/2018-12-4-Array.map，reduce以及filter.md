---
layout: post
title: Array.map，forEach，filter以及reduce
---

目前在学习函数式编程，以前浏览过但是一直没用，这次打算尽可能用到这一思想。

1. Array.map相当于强制遍历这个Array，如下代码：
```
    var array1 = [1, 4, 9, 16];
    
    const map1 = array1.map(function(x) {
    	if (x > 1) {
        	return x
        }
    });
    
    console.log(map1);
```
这个代码会返回```[undefined, 4, 9, 16]```。

2. Array.forEach为map的弱化版，并不会返回一个新的array，如下代码：
```
    var array1 = [1, 4, 9, 16];
    var map1 = []
    const map2 = array1.forEach(function(x) {
    	if (x > 1) {
        	map1.push(x)
        }
    });
    
    console.log(map1, map2);
```
这个代码会返回```[4, 9, 16],undefined```。
forEach的速度通常要比map[慢](https://codeburst.io/javascript-map-vs-foreach-f38111822c0f)。

3. Array.filter对于map进行了优化，如下代码：
```
    var array1 = [1, 4, 9, 16];
    
    const map1 = array1.filter(function(x) {
    	if (x > 1) {
        	return x
        }
    });
    
    console.log(map1);
```
这个代码会返回```[4, 9, 16]```。
比较常用的做法是链式调用```const map1 = array1.filter(FUNCTION).map(FUNCTION)```。

4. Array.reduce通常用于"降低数据复杂度"，[如下代码](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)：
```
    var people = [
      { name: 'Alice', age: 21 },
      { name: 'Max', age: 20 },
      { name: 'Jane', age: 20 }
    ];
    
    function groupBy(objectArray, property) {
      return objectArray.reduce(function (acc, obj) {
        var key = obj[property];
        if (!acc[key]) {
          acc[key] = [];
        }
        acc[key].push(obj);
        return acc;
      }, {});
    }
    
    var groupedPeople = groupBy(people, 'age');
    // groupedPeople is:
    // { 
    //   20: [
    //     { name: 'Max', age: 20 }, 
    //     { name: 'Jane', age: 20 }
    //   ], 
    //   21: [{ name: 'Alice', age: 21 }] 
    // }
```
函数体内return的数据会赋值到下一次循环中的acc中。